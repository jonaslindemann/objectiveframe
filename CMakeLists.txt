project(objframe2)

cmake_minimum_required(VERSION 3.10)

set (CMAKE_CXX_STANDARD 17)

set( LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib )
set( EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin )

option( USE_LEAP "Build with support for LeapMotion" OFF)

set( LIB_DRIVE "d:")

set( IVF_ROOT "${LIB_DRIVE}/Libraries/ivfplusplus" )
message(${IVF_ROOT})

set( IVF_INCLUDE_DIR ${IVF_ROOT}/include/vc ${IVF_ROOT}/include )

if (CMAKE_BUILD_TYPE STREQUAL "Debug")
    set( IVF_LIBS ${IVF_ROOT}/lib/Debug )
else()
    set( IVF_LIBS ${IVF_ROOT}/lib/Release )
endif()

if (WIN32)
        if (CMAKE_BUILD_TYPE STREQUAL "Debug")
                message("Debug libraries...")
                set(FLTK_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk")
                set(FLTK_ABI_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/build-debug")
                set(FLTK_BASE_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-debug/lib/Debug/fltkd.lib")
                set(FLTK_GL_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-debug/lib/Debug/fltk_gld.lib")
                set(JPEG_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/jpeg")
                set(JPEG_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-debug/lib/Debug/fltk_jpegd.lib")
                set(PNG_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/png")
                set(PNG_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-debug/lib/Debug/fltk_pngd.lib")
                set(ZLIB_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/zlib")
                set(ZLIB_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-debug/lib/Debug/fltk_zd.lib")
                set(GLEW_INCLUDE_DIR "${LIB_DRIVE}/Libraries/glew/include")
                set(GLEW_LIBRARY "${LIB_DRIVE}/Libraries/glew/lib/Debug/x64/glew32sd.lib")
                set(FREETYPE_INCLUDE_DIR "${LIB_DRIVE}/Libraries/freetype/include")
                set(FREETYPE_LIBRARY "${LIB_DRIVE}/Libraries/freetype/lib/freetyped.lib")
                set(FTGL_INCLUDE_DIR "${LIB_DRIVE}/Libraries/ftgl/src")
                set(FTGL_LIBRARY "${LIB_DRIVE}/Libraries/ftgl/msvc/build/ftgl_static_D.lib")
                #set(FREETYPE_INCLUDE_DIR
                set(OPENGL_LIBRARY "opengl32")
                set(GLUT_INCLUDE_DIR "${LIB_DRIVE}/Libraries/freeglut/include")
                set(GLUT_LIBRARY "${LIB_DRIVE}/Libraries/freeglut/build-debug/lib/Debug/freeglut_staticd.lib")
                set(GDIPLUS_LIBRARY "gdiplus")
                set(GLU_LIBRARY "glu32")
                set(GLFW3_INCLUDE_DIR "${LIB_DRIVE}/Libraries/glfw/include")
                set(GLFW3_LIBRARY "${LIB_DRIVE}/Libraries/glfw/build-debug/src/Debug/glfw3.lib")
                set(CHAISCRIPT_EXTRAS_INCLUDE "${LIB_DRIVE}/Libraries/ChaiScript_Extras/include")
                set(CHAISCRIPT_INCLUDE "${LIB_DRIVE}/Libraries/ChaiScript/include")
        else()
                message("Release libraries...")
                set(FLTK_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk")
                set(FLTK_ABI_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/build-release")
                set(FLTK_BASE_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-release/lib/Release/fltk.lib")
                set(FLTK_GL_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-release/lib/Release/fltk_gl.lib")
                set(JPEG_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/jpeg")
                set(JPEG_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-release/lib/Release/fltk_jpeg.lib")
                set(PNG_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/png")
                set(PNG_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-release/lib/Release/fltk_png.lib")
                set(ZLIB_INCLUDE_DIR "${LIB_DRIVE}/Libraries/fltk/zlib")
                set(ZLIB_LIBRARY "${LIB_DRIVE}/Libraries/fltk/build-release/lib/Release/fltk_z.lib")
                set(GLEW_INCLUDE_DIR "${LIB_DRIVE}/Libraries/glew/include")
                set(GLEW_LIBRARY "${LIB_DRIVE}/Libraries/glew/lib/Release/x64/glew32s.lib")
                set(FTGL_INCLUDE_DIR "${LIB_DRIVE}/Libraries/ftgl/src")
                set(FTGL_LIBRARY "${LIB_DRIVE}/Libraries/ftgl/msvc/build/ftgl_static.lib")
                set(FREETYPE_INCLUDE_DIR "${LIB_DRIVE}/Libraries/freetype/include")
                set(FREETYPE_LIBRARY "${LIB_DRIVE}/Libraries/freetype/lib/freetype.lib")
                #set(FREETYPE_INCLUDE_DIR
                set(OPENGL_LIBRARY "opengl32")
                set(GLUT_INCLUDE_DIR "${LIB_DRIVE}/Libraries/freeglut/include")
                set(GLUT_LIBRARY "${LIB_DRIVE}/Libraries/freeglut/build-release/lib/Release/freeglut_static.lib")
                set(GDIPLUS_LIBRARY "gdiplus")
                set(GLU_LIBRARY "glu32")
                set(GLFW3_INCLUDE_DIR "${LIB_DRIVE}/Libraries/glfw/include")
                set(GLFW3_LIBRARY "${LIB_DRIVE}/Libraries/glfw/build-debug/src/Release/glfw3.lib")
                set(CHAISCRIPT_EXTRAS_INCLUDE "${LIB_DRIVE}/Libraries/ChaiScript_Extras/include")
                set(CHAISCRIPT_INCLUDE "${LIB_DRIVE}/Libraries/ChaiScript/include")
        endif()
else()
    message("Release libraries...")
    set(FLTK_BASE_LIBRARY "fltk")
    set(FLTK_GL_LIBRARY "fltk_gl")
    set(JPEG_LIBRARY "jpeg")
    set(PNG_LIBRARY "png16")
    set(ZLIB_LIBRARY "z")
    set(OPENGL_LIBRARY "GL")
    set(GLU_LIBRARY "GLU")
    set(MISC_LIBRARIES "X11 Xft Xcursor Xinerama Xrender Xfixes fontconfig pthread")
    set(CHAISCRIPT_EXTRAS_INCLUDE "E:/Users/Jonas/Development/ChaiScript_Extras/include")
    set(DEPENDS_INCLUDE_DIR "/home/lindemann/Development/depends/include")
    set(DEPENDS_LIB_DIR "/home/lindemann/Development/depends/lib")
endif()

if (USE_LEAP)
    set( LEAP_LIBS ${PROJECT_SOURCE_DIR}/LeapSDK/lib )
    set( LEAP_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/LeapSDK/include )
else()
    set( LEAP_LIBS "" )
    set( LEAP_INCLUDE_DIR "" )
endif() 

configure_file (
    "${PROJECT_SOURCE_DIR}/include/ObjframeConfig.h.in"
    "${PROJECT_SOURCE_DIR}/include/ObjframeConfig.h"
)

#find_package(OpenGL)
#find_package(FLTK)
#find_package(GLEW)
#find_package(JPEG)
#find_package(PNG)
#find_package(ZLIB)


#set( FTGL_INCLUDE_DIR ${FTGL_ROOT}/src )
#set( FTGL_LIBS ${FTGL_ROOT}/msvc/Build )

set( OBJFRAME_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/include ${PROJECT_SOURCE_DIR}/include/vc ${PROJECT_SOURCE_DIR}/src/fem ${PROJECT_SOURCE_DIR}/src/visfem ${PROJECT_SOURCE_DIR}/src/newmat ${PROJECT_SOURCE_DIR}/src/util ${PROJECT_SOURCE_DIR}/src/imgui ${PROJECT_SOURCE_DIR}/src/imgui_fltk ${PROJECT_SOURCE_DIR}/src/objframe)

include_directories( ${DEPENDS_INCLUDE_DIR} ${OBJFRAME_INCLUDE_DIR} ${FLTK_INCLUDE_DIR} ${FLTK_ABI_INCLUDE_DIR} ${JPEG_INCLUDE_DIR} ${PNG_PNG_INCLUDE_DIR} ${ZLIB_INCLUDE_DIR} ${GLEW_INCLUDE_DIR} ${IVF_INCLUDE_DIR} ${OBJFRAME_INCLUDE} ${LEAP_INCLUDE_DIR} ${FTGL_INCLUDE_DIR} ${FREETYPE_INCLUDE_DIR} ${GLFW3_INCLUDE_DIR} ${CHAISCRIPT_EXTRAS_INCLUDE} ${CHAISCRIPT_INCLUDE})

message( ${IVF_INCLUDE_DIR} ) 

if(win32)
    link_directories( ${PROJECT_SOURCE_DIR}/lib ${IVF_LIBS} ${LEAP_LIBS})
else()
    link_directories( ${PROJECT_SOURCE_DIR}/lib ${DEPENDS_LIB_DIR} ${IVF_LIBS} ${LEAP_LIBS})
endif()

if(WIN32)
    if(IVF_DEBUG)
        string(REPLACE "/zi" "/z7" CMAKE_CXX_FLAGS_DEBUG ${CMAKE_CXX_FLAGS_DEBUG})
        string(REPLACE "/zi" "/z7" CMAKE_C_FLAGS_DEBUG ${CMAKE_C_FLAGS_DEBUG})
    endif(IVF_DEBUG)
endif(WIN32)

subdirs(src)
